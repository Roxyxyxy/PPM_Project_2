{% extends 'store/main.html' %} {% load static %} {% block content %}
<div class="container mt-4">
  <h2>Gestione Prodotti</h2>

  {% if messages %} {% for message in messages %}
  <div class="alert alert-{{ message.tags }}">{{ message }}</div>
  {% endfor %} {% endif %}

  <a href="{% url 'management:add_product' %}" class="btn btn-primary mb-3"
    >Aggiungi Prodotto</a
  >

  <table class="table table-striped">
    <thead class="thead-dark">
      <tr>
        <th>ID</th>
        <th>Immagine</th>
        <th>Nome</th>
        <th>Prezzo</th>
        <th>Digitale</th>
        <th>Azioni</th>
      </tr>
    </thead>
    <tbody>
      {% for product in products %}
      <tr>
        <td>{{ product.id }}</td>
        <td>
          <img
            src="{{ product.imageURL }}"
            width="50"
            height="50"
            class="img-thumbnail"
          />
        </td>
        <td>{{ product.name }}</td>
        <td>€{{ product.price|floatformat:2 }}</td>
        <td>{% if product.digital %}Sì{% else %}No{% endif %}</td>
        <td>
          <a
            href="{% url 'management:edit_product' product.id %}"
            class="btn btn-sm btn-info"
            >Modifica</a
          >
          <form
            action="{% url 'management:delete_product' product.id %}"
            method="post"
            class="d-inline"
          >
            {% csrf_token %}
            <button
              type="submit"
              class="btn btn-sm btn-danger"
              onclick="return confirm('Sei sicuro di voler eliminare questo prodotto?')"
            >
              Elimina
            </button>
          </form>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="6" class="text-center">Nessun prodotto disponibile</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock content %}